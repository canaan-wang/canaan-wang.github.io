## 全业务巡检
- 介绍：支付宝线上业务巡检校验平台，通过流量构造、告警等能力，使业务风险左移，以减少生产故障。
- 脚本化能力：通过在线化 IDE、自定义框架、动态加载能力，以提升用户的流量构造代码开发效率，并支持流量构造能力可复用于压测场景
- 技术实现：VSCode、SOFA 框架、OSS 远端存储、Java 类的动态加载、拉模式的数据同步等
- 额外能力：
    支持编写 Aliyun UDF 环境下的数据处理代码，并使用
    脚本化能力打包给 天燕平台复用（配置变更校验）。减少该平台脚本模块的开发工作量。
- 问题：
    SDK 升级问题；
        SDK 提供给其它业务程序使用时，SDK 中依赖的 DDS-OSS 与该程序依赖的 Mist 相关包产生了配置方面的冲突，无法通过配置的方式解决。
        SDK 依赖 DDS-OSS 的原因是需要获取 OSS 中对应 Object 有效的 Http Url，因为该 url 有一定的有效时间，所以无法固化。
        将 SDK 获取 OSS Http Url 的逻辑放入巡检平台控制层代码，由 SDK 查询控制层代码获取。
    Log 日志打印问题：
        巡检脚本执行时，日志中的 traceId 未打印。
        发现代码中使用的 Logger 为 Sofa 提供的 Logger Pool 而非官方指定的 TracerLogger。
        对比代码后发现 tracerId 需要显示的放入 mdc 中
        找 Tracer 中间件的同学沟通后，Tracer1.0 版本已不再维护，无法适配我们的场景。
        后续通过在代码中的 LoggerUtil 类中将 TracerId 放入 mdc 中解决。
    FGC：
        线上监控异常，FGC 频繁发生，dump 内存，进行分析后发现是 ClassLoader 过多导致。
        但是代码未发生变动，故有可能是其它配置发生变更。
        后续发现有个同学为了自己测试方便，在 DB 中插入了一条自己新类型的测试脚本，该脚本一直发生加载失败。导致 ClassLoader 过多。
        提交 DB 数据删除工单，执行后，重启所有服务。SDK 层面加了类型配置校验，脚本加载层面将脚本加载失败的 case 也归入已加载的容器中。防止一直加载失败。