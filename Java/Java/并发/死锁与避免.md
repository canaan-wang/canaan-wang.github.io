# 死锁与避免策略

- 死锁条件（同时满足）：互斥、占有且等待、不可剥夺、循环等待。
- 避免策略：
  - 统一加锁顺序（全局顺序），破坏循环等待条件。
  - 尽量缩短持锁时间，降低锁粒度，减少嵌套锁。
  - 使用 tryLock 超时放弃，避免长时间等待。
  - 资源分配图/检测工具定位死锁。
- 调试技巧：
  - jstack/JFR/VisualVM 等工具查看线程与锁的持有关系。