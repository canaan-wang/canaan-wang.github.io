# Java 面向对象编程

## 定义与作用
面向对象编程（Object-Oriented Programming，OOP）是一种程序设计范式，它以对象为核心，通过封装、继承、多态等特性来组织代码。Java 是完全面向对象的编程语言，所有代码都必须在类中定义。

## 核心概念

### 类（Class）
- **定义**：对象的抽象描述，用于表示一组对象的创建模板
- **作用**：定义对象的属性（成员变量）和行为（方法）
- **特性**：
  - 类是对象的蓝图
  - 类可以包含构造器、成员变量、方法、内部类等
  - 类支持访问修饰符控制可见性

### 对象（Object）
- **定义**：系统中用来描述客观事物的一个实体，用于构成系统的基本单位
- **特性**：
  - 对象是类的实例
  - 每个对象都有唯一的标识（内存地址）
  - 对象包含状态（属性值）和行为（方法）

### 实例化过程
```java
// 类定义
public class Person {
    private String name;
    private int age;
    
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    public void introduce() {
        System.out.println("我叫" + name + ", 今年" + age + "岁");
    }
}

// 对象创建
Person person = new Person("张三", 25);
person.introduce();
```

## 面向对象的三大特征

### 封装（Encapsulation）
- **定义**：隐藏对象的属性和实现细节，仅对外提供访问方法
- **目的**：
  - 提高代码的安全性
  - 降低代码的耦合度
  - 便于维护和修改
- **实现方式**：
  - 使用 private 修饰成员变量
  - 提供 public 的 getter 和 setter 方法

### 继承（Inheritance）
- **定义**：从已有类继承信息定义新类的过程（父类/基类 -> 派生类/子类）
- **目的**：
  - 代码复用
  - 建立类之间的层次关系
  - 支持多态
- **特性**：
  - Java 支持单继承（一个类只能继承一个父类）
  - 所有类都直接或间接继承自 Object 类
  - 子类可以重写父类的方法

### 多态（Polymorphism）
- **定义**：不同类型的子类对同一方法做出不同的行为
- **类型**：
  - 编译时多态：方法重载（Overload）
  - 运行时多态：方法重写（Override）
- **实现条件**：
  - 继承关系
  - 方法重写
  - 父类引用指向子类对象

## 多态的实现方式

### 代码实现方式
1. **接口实现**：通过实现接口定义的方法
2. **继承父类重写方法**：子类重写父类的方法
3. **方法重载**：同一类中定义多个同名但参数不同的方法

### 虚拟机实现机制
- **动态绑定技术**：执行期间判断所引用对象的实际类型，根据实际类型调用对应的方法
- **方法表**：每个类都有一个方法表，存储方法的实际地址
- **虚方法调用**：通过方法表实现动态分派

## 方法重载（Overload）

### 定义
在同一个类中，允许存在多个同名方法，只要它们的参数列表不同。

### 规则
- 发生在一个类中
- 方法名必须相同
- 参数列表必须不同（类型、个数、顺序）
- 返回值类型可以不同
- 访问修饰符可以不同
- 抛出的异常可以不同

### 示例
```java
public class Calculator {
    // 整数加法
    public int add(int a, int b) {
        return a + b;
    }
    
    // 浮点数加法
    public double add(double a, double b) {
        return a + b;
    }
    
    // 三个整数加法
    public int add(int a, int b, int c) {
        return a + b + c;
    }
}
```

## 方法重写（Override）

### 定义
子类重新定义父类中已有的方法，提供特定的实现。

### 规则
- 发生在子类继承父类中
- 方法名必须相同
- 参数列表必须相同
- 返回值类型必须相同或是父类返回类型的子类
- 访问权限不能比父类更严格
- 抛出的异常不能比父类更广泛

### @Override 注解
- 用于标记重写的方法
- 编译器会检查是否符合重写规则
- 提高代码的可读性

### 示例
```java
class Animal {
    public void makeSound() {
        System.out.println("动物发出声音");
    }
}

class Dog extends Animal {
    @Override
    public void makeSound() {
        System.out.println("汪汪汪");
    }
}
```

## 构造器（Constructor）

### 定义
用于创建对象时初始化对象的特殊方法。

### 特性
- 方法名与类名相同
- 没有返回值类型（连 void 都没有）
- 可以重载
- 不能被继承，但子类可以调用父类的构造器

### 构造器调用顺序
1. 父类静态代码块
2. 子类静态代码块
3. 父类构造代码块
4. 父类构造器
5. 子类构造代码块
6. 子类构造器

### 示例
```java
public class Person {
    private String name;
    
    // 默认构造器
    public Person() {
        this.name = "未知";
    }
    
    // 带参数构造器
    public Person(String name) {
        this.name = name;
    }
}
```

## 接口（Interface）

### 定义
定义一组抽象方法的契约，实现类必须实现这些方法。

### 意义
- 实现多态
- 定义规范
- 解耦合
- 支持多重继承

### 特性
- 接口可以继承多个接口
- 接口中的方法默认是 public abstract
- 接口中的变量默认是 public static final
- Java 8 开始支持默认方法和静态方法
- Java 9 开始支持私有方法

### 示例
```java
interface Flyable {
    void fly();
    
    // 默认方法
    default void takeOff() {
        System.out.println("起飞准备");
    }
    
    // 静态方法
    static void showInfo() {
        System.out.println("这是一个飞行接口");
    }
}

class Bird implements Flyable {
    @Override
    public void fly() {
        System.out.println("鸟儿在飞翔");
    }
}
```

## 抽象类（Abstract Class）

### 定义
包含抽象方法的类，不能实例化。

### 意义
- 为其他子类提供一个公共的类型
- 封装子类中重复定义的内容
- 定义抽象方法，子类虽然有不同的实现，但定义是一致的

### 特性
- 可以包含抽象方法和具体方法
- 可以有构造器
- 可以有成员变量
- 可以包含静态方法

### 示例
```java
abstract class Shape {
    protected String color;
    
    public Shape(String color) {
        this.color = color;
    }
    
    // 抽象方法
    public abstract double getArea();
    
    // 具体方法
    public void showColor() {
        System.out.println("颜色：" + color);
    }
}

class Circle extends Shape {
    private double radius;
    
    public Circle(String color, double radius) {
        super(color);
        this.radius = radius;
    }
    
    @Override
    public double getArea() {
        return Math.PI * radius * radius;
    }
}
```

## 抽象类与接口的区别

| 特性 | 抽象类 | 接口 |
|------|--------|------|
| 实例化 | 不能实例化 | 不能实例化 |
| 构造器 | 可以有构造器 | 不能有构造器 |
| 方法实现 | 可以有具体方法 | Java 8 前只能有抽象方法 |
| 成员变量 | 可以有各种成员变量 | 只能是常量（public static final） |
| 继承 | 单继承 | 多继承 |
| 访问修饰符 | 各种访问修饰符 | 默认 public |

## 设计原则

### 单一职责原则
一个类应该只有一个引起变化的原因。

### 开闭原则
对扩展开放，对修改关闭。

### 里氏替换原则
子类必须能够替换掉它们的父类。

### 接口隔离原则
客户端不应该依赖它不需要的接口。

### 依赖倒置原则
高层模块不应该依赖低层模块，二者都应该依赖抽象。

## 总结
面向对象编程是 Java 的核心特性，通过封装、继承、多态等机制，可以构建出结构清晰、易于维护的软件系统。理解面向对象的概念和原则对于编写高质量的 Java 代码至关重要。

## 最佳实践
1. 优先使用组合而非继承
2. 面向接口编程，降低耦合度
3. 合理使用访问修饰符控制可见性
4. 遵循设计原则，提高代码质量
5. 适当使用设计模式解决常见问题

最后更新时间：2024-01-15