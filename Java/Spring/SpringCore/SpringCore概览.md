# Spring Core 概览

# 一、Spring Core 是什么？—— 生态的“根”

## 1.1 核心定位

Spring Core（Spring 核心模块）是整个 Spring 生态体系的**基础基石**，所有 Spring 组件（如 Spring Boot、Spring MVC、Spring Cloud）都构建在其之上。它不直接解决业务问题，而是通过提供一套“对象管理”的核心机制，为上层组件和业务开发提供“解耦”和“简化”的能力。

形象比喻：如果把 Spring 生态看作一栋大厦，Spring Core 就是“地基”和“框架结构”，决定了整个大厦的稳定性和扩展性；其他组件则是基于结构搭建的“墙体”“门窗”等功能模块。

## 1.2 核心组成

Spring Core 模块的核心内容集中在 `spring-core` 和 `spring-beans` 两个基础Jar包中，核心组成可分为三大块：

- **Bean 管理体系**：负责对象的定义、创建、依赖管理、生命周期管控的完整机制，是 IOC 思想的核心载体；

- **AOP 基础框架**：提供面向切面编程的核心能力，支持横切逻辑的抽离与织入；

- **基础工具类**：提供大量 Java 开发常用的工具类（如类型转换、资源加载、反射工具等），简化底层编码。

关键认知：Spring Core 的核心价值不是“功能实现”，而是“机制提供”—— 提供一套让对象“有序、解耦、可管”的管理机制。

# 二、Spring Core 核心能力：两大支柱

Spring Core 的核心竞争力源于两大核心能力，这也是 Spring 框架的“灵魂”所在，所有上层组件的便捷性都依赖这两大能力。

## 2.1 控制反转（IOC）—— 解耦的“核心引擎”

### 2.1.1 什么是 IOC？

IOC（Inversion of Control，控制反转）是一种**对象管理思想**，核心是“反转对象的控制权”：

- **传统开发模式**：开发者在业务代码中“主动控制”对象的创建和依赖（如 Service 中直接 `new UserDao()`），对象之间强耦合；

- **IOC 模式**：开发者仅定义对象的“元信息”（如类名、依赖关系），将对象的创建、依赖注入、生命周期管理等“控制权”交给 Spring 容器（如 BeanFactory），业务代码“被动使用”对象。

### 2.1.2 IOC 的核心载体：Bean 与容器

IOC 思想通过“Bean”和“容器”实现，二者是 Spring Core 的核心概念：

1. **Bean：容器管理的对象**
Bean 是 Spring 容器管理的“Java 对象”，本质是符合特定规范的普通 Java 类（如默认有无参构造器、支持 setter 方法等）。并非所有 Java 类都是 Bean，只有通过“元信息”注册到容器中的类，才会被容器实例化为 Bean 并管理。

2. **容器：Bean 的“管家”**
Spring 容器是实现 IOC 的核心组件，负责根据“元信息”完成 Bean 的“全生命周期管理”，核心接口是 `BeanFactory` 和 `ApplicationContext`：
        `BeanFactory`：最基础的容器接口，定义了 Bean 的获取、判断等核心方法，采用“懒加载”模式（调用 `getBean()` 时才创建 Bean），轻量但功能简单；

3. `ApplicationContext`：`BeanFactory` 的子接口，是实际开发的主流容器，在基础功能上扩展了“非懒加载”（容器启动时创建单例 Bean）、资源加载、事件发布等企业级能力。

4. **元信息：Bean 的“说明书”**
元信息是描述 Bean 的“配置信息”，告诉容器“如何创建 Bean”，核心载体是 `BeanDefinition` 接口，包含类名、作用域、依赖关系、初始化方法、销毁方法等关键信息。元信息的配置方式有三种：XML 配置、注解配置（如 `@Component`）、Java 配置（如 `@Bean`）。

### 2.1.3 IOC 的核心流程

容器从启动到提供 Bean 的完整流程，体现了 IOC 的核心逻辑：

```text

1. 资源定位：容器加载 Bean 元信息（如 XML 文件、注解类）；
2. 解析注册：将元信息解析为 BeanDefinition，注册到容器的“注册表”；
3. 实例化 Bean：容器根据 BeanDefinition 实例化对象（单例 Bean 启动时创建，多例调用时创建）；
4. 依赖注入：容器将依赖的 Bean 自动注入到当前 Bean 中（如 @Autowired 注入）；
5. 初始化：执行 Bean 的初始化方法（如 @PostConstruct）；
6. 就绪使用：将初始化完成的 Bean 存入缓存，供开发者通过 getBean() 获取；
7. 销毁：容器关闭时，执行 Bean 的销毁方法（如 @PreDestroy）。
```

## 2.2 面向切面编程（AOP）—— 解耦横切逻辑

### 2.2.1 什么是 AOP？

AOP（Aspect-Oriented Programming，面向切面编程）是一种**编程思想**，作为面向对象（OOP）的补充，专注于解决“横切逻辑”的复用问题：

- **横切逻辑**：指那些“横跨多个业务模块”的通用逻辑，如日志记录、事务管理、权限校验等（例：所有接口都需要日志记录，所有转账方法都需要事务控制）；

- **AOP 核心逻辑**：将横切逻辑抽离为独立的“切面（Aspect）”，通过配置指定“切入到业务代码的位置”（如方法执行前/后），由容器自动将切面“织入”业务代码，无需修改业务逻辑本身。

### 2.2.2 AOP 核心术语

理解 AOP 需掌握几个核心术语，是后续使用和配置的基础：

|术语|核心含义|通俗解释|
|---|---|---|
|切面（Aspect）|封装横切逻辑的类，包含切入点和通知|“日志工具类”“事务工具类”就是一个切面|
|切入点（Pointcut）|定义“切面要切入哪些业务方法”的表达式|指定“所有 Service 层的 save 方法”为切入位置|
|通知（Advice）|切面的具体逻辑，及切入的“时机”|“方法执行前记录日志”“方法异常时回滚事务”|
|织入（Weaving）|将切面逻辑融入业务代码的过程|容器自动把日志逻辑“插入”到业务方法中|
|连接点（JoinPoint）|业务代码中可能被切入的“位置”（如方法执行前/后）|每个方法的“执行前”“执行后”都是连接点|
### 2.2.3 AOP 的核心价值

AOP 最核心的价值是“**解耦横切逻辑与业务逻辑**”：

- 业务代码更纯粹：只需关注核心业务（如转账、下单），无需掺杂日志、事务等非业务代码；

- 横切逻辑可复用：一个切面可切入多个业务模块，修改时只需改切面代码，无需改动所有业务模块；

- 规则集中管理：切面的切入范围和时机可集中配置，便于统一管控（如所有新增方法自动加日志）。

# 三、Spring Core 其他核心内容

## 3.1 基础工具类：开发的“小助手”

Spring Core 提供了大量封装好的基础工具类，简化 Java 底层编码，是很多开源框架的“工具依赖”，核心常用工具类：

- `org.springframework.util` 包：包含字符串处理（`StringUtils`）、集合处理（`CollectionUtils`）、反射工具（`ReflectionUtils`）等；

- `org.springframework.beans` 包：提供 Bean 属性操作（`BeanUtils.copyProperties` 实现对象属性拷贝）等；

- `org.springframework.core.io` 包：统一资源加载接口（`Resource`），支持加载类路径、文件系统、网络等多种资源。

## 3.2 Bean 的核心特性

Spring Core 对 Bean 的管理支持丰富的特性，满足不同场景需求，核心特性：

1. **作用域（Scope）**：定义 Bean 的创建模式，核心有单例（`singleton`，默认）、多例（`prototype`）、请求域（`request`）等；

2. **生命周期管理**：支持自定义初始化（如 `@PostConstruct`）和销毁（如 `@PreDestroy`）方法；

3. **延迟加载（Lazy Initialization）**：单例 Bean 可通过 `@Lazy` 注解开启懒加载，仅在第一次使用时创建；

4. **依赖注入方式**：支持构造器注入、setter 注入、字段注入（`@Autowired`）三种核心方式。

# 四、Spring Core 的核心价值

为什么 Spring Core 能成为生态基石？核心在于它解决了企业级开发的“核心痛点”：

1. **解耦：从“强耦合”到“弱依赖”**
通过 IOC 反转对象控制权，消除业务代码中“主动 new 对象”的强耦合；通过 AOP 抽离横切逻辑，消除横切逻辑与业务逻辑的耦合，大幅提升代码可维护性。

2. **简化：从“重复编码”到“开箱即用”**
容器自动完成 Bean 的创建、依赖注入、生命周期管理，开发者无需编写重复的对象管理代码；基础工具类封装了底层细节（如反射、资源加载），简化编码。

3. **可扩展：从“固定架构”到“灵活适配”**
BeanDefinition、BeanPostProcessor 等扩展点支持自定义 Bean 处理逻辑；AOP 支持自定义切面扩展横切能力，满足不同业务场景的定制需求。

4. **统一：从“杂乱管理”到“标准机制”**
提供统一的 Bean 管理机制、资源加载机制、AOP 织入机制，使上层组件（如 Spring Boot、Spring MVC）无需重复设计基础机制，只需基于标准扩展。

# 五、总结

1. **定位**：Spring Core 是 Spring 生态的“基石”，提供 Bean 管理和 AOP 两大核心机制；
2. **核心**：IOC 解决对象依赖耦合问题，AOP 解决横切逻辑复用问题，二者共同构成 Spring 解耦的核心能力；
3. **关键概念**：Bean（被管理的对象）、容器（Bean 管家）、BeanDefinition（Bean 说明书）、切面（横切逻辑封装）；
4. **价值**：通过解耦、简化、统一、可扩展的机制，降低企业级开发复杂度，提升代码可维护性；
5. **使用核心**：定义 Bean 元信息 → 启动容器 → 从容器获取 Bean 并使用，无需关心对象创建和依赖。